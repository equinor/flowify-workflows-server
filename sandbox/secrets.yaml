# https://jwt.io/
# http://jwtbuilder.jamiekurtz.com/
# https://github.com/mattroberts297/jsonwebtokencli
# https://github.com/kislyuk/yq

command: yq .$user.payload secrets.yaml | jwt --encode --secret $(yq -r .secret secrets.yaml)

# user flowe
flowe:
  payload:
    aud: flowify.io
    iss: sandbox

    # Timestamps for issue and expiry
    iat: 1663674547
    nbf: 1663674547
    exp: 2610445747

    email: flow@flowify.io
    name: F. Lowe
    roles:
      - sandbox-developer
      - sandbox-admin

  command: yq .flowe.payload secrets.yaml | jwt --encode --secret $(yq -r .secret secrets.yaml)
  token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJmbG93aWZ5LmlvIiwiaXNzIjoic2FuZGJveCIsIm5iZiI6MTY2MzY3NDU0NywiZXhwIjoyNjEwNDQ1NzQ3LCJlbWFpbCI6ImZsb3dAZmxvd2lmeS5pbyIsIm5hbWUiOiJGLiBMb3dlIiwicm9sZXMiOlsic2FuZGJveC1kZXZlbG9wZXIiLCJzYW5kYm94LWFkbWluIl19.S8clYNg4hzLadKpRZAuxsgGdhrUUUXvOmWUIDNBEISU
  roundtrip: yq .flowe.payload secrets.yaml | jwt --encode --secret $(yq -r .secret secrets.yaml) | jwt --decode --secret $(yq -r .secret secrets.yaml)

# user swirl
swirl:
  payload:
    aud: flowify.io
    iss: sandbox

    # Timestamps for issue and expiry
    iat: 1663674547
    nbf: 1663674547
    exp: 2610445747

    email: swirl@flowify.io
    name: S. Wirlop
    roles:
      - sandbox-developer
  
  command: yq .swirl.payload secrets.yaml | jwt --encode --secret $(yq -r .secret secrets.yaml)
  token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhdWQiOiJmbG93aWZ5LmlvIiwiaXNzIjoic2FuZGJveCIsIm5iZiI6MTY2MzY3NDU0NywiZXhwIjoyNjEwNDQ1NzQ3LCJlbWFpbCI6InN3aXJsQGZsb3dpZnkuaW8iLCJuYW1lIjoiUy4gV2lybG9wIiwicm9sZXMiOlsic2FuZGJveC1kZXZlbG9wZXIiXX0.kpg2imsX0lqxaC6i3WAnd9Mkna088Nr739dXnPOcicU
  roundtrip: yq .swirl.payload secrets.yaml | jwt --encode --secret $(yq -r .secret secrets.yaml) | jwt --decode --secret $(yq -r .secret secrets.yaml)


secret: flowify.io.1234567890

# should be round trippable
